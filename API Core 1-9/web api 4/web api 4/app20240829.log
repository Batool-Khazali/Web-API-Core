2024-08-29 11:39:18.924 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 11:39:18.996 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 11:39:18.999 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 11:39:19.000 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 11:39:19.001 +03:00 [INF] Hosting environment: Development
2024-08-29 11:39:19.001 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 11:39:19.400 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 11:39:19.536 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 138.7045ms
2024-08-29 11:39:19.558 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 11:39:19.558 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 11:39:19.565 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 6.5992ms
2024-08-29 11:39:19.580 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.1993ms
2024-08-29 11:39:19.691 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 11:39:19.761 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.4843ms
2024-08-29 11:39:41.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 11:39:41.614 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 8.3608ms
2024-08-29 11:39:41.643 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 11:39:41.646 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 2.8138ms
2024-08-29 11:39:41.646 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 11:39:41.660 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.4705ms
2024-08-29 11:39:41.824 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 11:39:41.833 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.544ms
2024-08-29 11:40:00.947 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 11:40:00.957 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 11:40:00.967 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 11:40:01.894 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 11:40:01.946 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 11:40:01.961 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 991.4359ms
2024-08-29 11:40:01.964 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 11:40:01.970 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 1022.4203ms
2024-08-29 11:41:21.306 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 11:41:21.374 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 11:41:21.376 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 11:41:21.379 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 11:41:21.379 +03:00 [INF] Hosting environment: Development
2024-08-29 11:41:21.379 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 11:41:21.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 11:41:21.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 127.4686ms
2024-08-29 11:41:21.870 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 11:41:21.871 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 11:41:21.876 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 4.3862ms
2024-08-29 11:41:21.890 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.7205ms
2024-08-29 11:41:22.001 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 11:41:22.069 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.5019ms
2024-08-29 11:41:28.671 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 11:41:28.678 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 6.6837ms
2024-08-29 11:41:28.701 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 11:41:28.705 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 11:41:28.708 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 2.5282ms
2024-08-29 11:41:28.711 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.2021ms
2024-08-29 11:41:28.734 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 11:41:28.743 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.7008ms
2024-08-29 11:41:33.454 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/CartItems - null null
2024-08-29 11:41:33.463 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 11:41:33.474 +03:00 [INF] Route matched with {action = "allCartItems", controller = "CartItems"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult allCartItems() on controller web_api_4.Controllers.CartItemsController (web api 4).
2024-08-29 11:41:34.451 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CartItemID] AS [CartItemId], [c].[CartID] AS [CartId], [c].[Quantity], [p].[ProductID] AS [ProductId], [p].[ProductName], [p].[Price], [p].[ProductImage]
FROM [CartItems] AS [c]
LEFT JOIN [Products] AS [p] ON [c].[ProductID] = [p].[ProductID]
2024-08-29 11:41:34.485 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.DTOs.CartItemsResponseDTO, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 11:41:34.512 +03:00 [INF] Executed action web_api_4.Controllers.CartItemsController.allCartItems (web api 4) in 1031.7471ms
2024-08-29 11:41:34.514 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 11:41:34.521 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/CartItems - 200 null application/json; charset=utf-8 1066.1647ms
2024-08-29 11:42:38.599 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 11:42:38.666 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 11:42:38.669 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 11:42:38.671 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 11:42:38.671 +03:00 [INF] Hosting environment: Development
2024-08-29 11:42:38.672 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 11:42:39.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 11:42:39.226 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 145.9326ms
2024-08-29 11:42:39.250 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 11:42:39.251 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 11:42:39.254 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 3.8417ms
2024-08-29 11:42:39.272 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.308ms
2024-08-29 11:42:39.320 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 11:42:39.400 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 79.9113ms
2024-08-29 11:42:53.984 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 11:42:53.994 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 11:42:54.008 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 11:42:54.930 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 11:42:54.978 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 11:42:55.012 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 994.2973ms
2024-08-29 11:42:55.013 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 11:42:55.027 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 1042.7149ms
2024-08-29 11:44:13.475 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 11:44:13.559 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address https://127.0.0.1:7192: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2024-08-29 11:45:18.095 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 11:45:18.161 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 11:45:18.163 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 11:45:18.165 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 11:45:18.165 +03:00 [INF] Hosting environment: Development
2024-08-29 11:45:18.165 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 11:45:18.597 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 11:45:18.728 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 131.7914ms
2024-08-29 11:45:18.754 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 11:45:18.758 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 3.9687ms
2024-08-29 11:45:18.759 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 11:45:18.780 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.7295ms
2024-08-29 11:45:18.834 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 11:45:18.913 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 79.1556ms
2024-08-29 12:21:13.885 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 12:21:13.960 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 12:21:13.961 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 12:21:13.963 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 12:21:13.963 +03:00 [INF] Hosting environment: Development
2024-08-29 12:21:13.963 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 12:21:14.617 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 12:21:14.780 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 164.8745ms
2024-08-29 12:21:14.810 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 12:21:14.811 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 12:21:14.815 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 5.0545ms
2024-08-29 12:21:14.836 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.7911ms
2024-08-29 12:21:14.895 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 12:21:14.976 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.4865ms
2024-08-29 12:21:18.954 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 12:21:18.961 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 12:21:18.969 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 12:21:19.656 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 12:21:19.698 +03:00 [INF] success yay
2024-08-29 12:21:19.703 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 12:21:19.717 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 743.2928ms
2024-08-29 12:21:19.718 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 12:21:19.723 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 768.834ms
2024-08-29 12:29:04.766 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories/5 - null null
2024-08-29 12:29:04.771 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.GetCategoryById (web api 4)'
2024-08-29 12:29:04.776 +03:00 [INF] Route matched with {action = "GetCategoryById", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCategoryById(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 12:29:04.942 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 12:29:04.947 +03:00 [INF] Executing OkObjectResult, writing value of type 'web_api_4.Models.Category'.
2024-08-29 12:29:04.949 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.GetCategoryById (web api 4) in 170.9205ms
2024-08-29 12:29:04.950 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.GetCategoryById (web api 4)'
2024-08-29 12:29:04.951 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories/5 - 200 null application/json; charset=utf-8 185.1967ms
2024-08-29 12:30:49.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories/99 - null null
2024-08-29 12:30:49.083 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.GetCategoryById (web api 4)'
2024-08-29 12:30:49.083 +03:00 [INF] Route matched with {action = "GetCategoryById", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCategoryById(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 12:30:49.132 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 12:30:49.140 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-08-29 12:30:49.153 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.GetCategoryById (web api 4) in 68.9601ms
2024-08-29 12:30:49.155 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.GetCategoryById (web api 4)'
2024-08-29 12:30:49.156 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories/99 - 404 null application/problem+json; charset=utf-8 77.361ms
2024-08-29 12:36:00.314 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 12:36:00.383 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 12:36:00.385 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 12:36:00.388 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 12:36:00.389 +03:00 [INF] Hosting environment: Development
2024-08-29 12:36:00.389 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 12:36:00.641 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 12:36:00.799 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 159.0211ms
2024-08-29 12:36:00.825 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 12:36:00.826 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 12:36:00.831 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 6.0324ms
2024-08-29 12:36:00.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.6105ms
2024-08-29 12:36:00.915 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 12:36:01.014 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.623ms
2024-08-29 12:36:08.648 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 12:36:08.656 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 12:36:08.665 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 12:36:09.297 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 12:36:09.335 +03:00 [INF] success yay
2024-08-29 12:36:09.339 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 12:36:09.352 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 683.031ms
2024-08-29 12:36:09.353 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 12:36:09.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 710.6799ms
2024-08-29 12:36:16.927 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Products - null null
2024-08-29 12:36:16.931 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.ProductsController.getAllProducts (web api 4)'
2024-08-29 12:36:16.933 +03:00 [INF] Route matched with {action = "getAllProducts", controller = "Products"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllProducts() on controller web_api_4.Controllers.ProductsController (web api 4).
2024-08-29 12:36:16.952 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryID], [p].[Description], [p].[Price], [p].[ProductImage], [p].[ProductName]
FROM [Products] AS [p]
2024-08-29 12:36:16.970 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Product, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 12:36:16.977 +03:00 [INF] Executed action web_api_4.Controllers.ProductsController.getAllProducts (web api 4) in 42.7021ms
2024-08-29 12:36:16.979 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.ProductsController.getAllProducts (web api 4)'
2024-08-29 12:36:16.980 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Products - 200 null application/json; charset=utf-8 53.1228ms
2024-08-29 12:41:11.204 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 12:41:11.272 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 12:41:11.274 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 12:41:11.276 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 12:41:11.277 +03:00 [INF] Hosting environment: Development
2024-08-29 12:41:11.277 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 12:41:11.575 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 12:41:11.717 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 143.1721ms
2024-08-29 12:41:11.742 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 12:41:11.747 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 4.91ms
2024-08-29 12:41:11.747 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 12:41:11.772 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.1554ms
2024-08-29 12:41:11.821 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 12:41:11.901 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.5908ms
2024-08-29 12:41:20.004 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 12:41:20.011 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 12:41:20.019 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 12:41:20.681 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 12:41:20.720 +03:00 [INF] success yay
2024-08-29 12:41:20.724 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 12:41:20.740 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 716.4174ms
2024-08-29 12:41:20.741 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 12:41:20.749 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 744.8871ms
2024-08-29 12:41:26.169 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Products - null null
2024-08-29 12:41:26.172 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.ProductsController.getAllProducts (web api 4)'
2024-08-29 12:41:26.175 +03:00 [INF] Route matched with {action = "getAllProducts", controller = "Products"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllProducts() on controller web_api_4.Controllers.ProductsController (web api 4).
2024-08-29 12:41:26.192 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryID], [p].[Description], [p].[Price], [p].[ProductImage], [p].[ProductName]
FROM [Products] AS [p]
2024-08-29 12:41:26.205 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Product, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 12:41:26.212 +03:00 [INF] Executed action web_api_4.Controllers.ProductsController.getAllProducts (web api 4) in 35.3174ms
2024-08-29 12:41:26.213 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.ProductsController.getAllProducts (web api 4)'
2024-08-29 12:41:26.214 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Products - 200 null application/json; charset=utf-8 44.919ms
2024-08-29 12:41:53.368 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Users - null null
2024-08-29 12:41:53.370 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.UsersController.getAllUsers (web api 4)'
2024-08-29 12:41:53.372 +03:00 [INF] Route matched with {action = "getAllUsers", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllUsers() on controller web_api_4.Controllers.UsersController (web api 4).
2024-08-29 12:41:53.442 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2024-08-29 12:41:53.452 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.User, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 12:41:53.454 +03:00 [INF] Executed action web_api_4.Controllers.UsersController.getAllUsers (web api 4) in 80.6144ms
2024-08-29 12:41:53.455 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.UsersController.getAllUsers (web api 4)'
2024-08-29 12:41:53.456 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Users - 200 null application/json; charset=utf-8 87.4767ms
2024-08-29 12:43:04.977 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 12:43:05.057 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 12:43:05.058 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 12:43:05.060 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 12:43:05.060 +03:00 [INF] Hosting environment: Development
2024-08-29 12:43:05.061 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 12:43:05.313 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 12:43:05.483 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 170.7262ms
2024-08-29 12:43:05.505 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 12:43:05.506 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 12:43:05.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 4.5966ms
2024-08-29 12:43:05.532 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.5246ms
2024-08-29 12:43:05.585 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 12:43:05.662 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 76.8593ms
2024-08-29 12:43:12.244 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 12:43:12.253 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 12:43:12.263 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 12:43:13.014 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 12:43:13.059 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 12:43:13.074 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 806.3417ms
2024-08-29 12:43:13.075 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 12:43:13.081 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 837.4286ms
2024-08-29 12:43:19.509 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Users - null null
2024-08-29 12:43:19.514 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.UsersController.getAllUsers (web api 4)'
2024-08-29 12:43:19.518 +03:00 [INF] Route matched with {action = "getAllUsers", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllUsers() on controller web_api_4.Controllers.UsersController (web api 4).
2024-08-29 12:43:19.535 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2024-08-29 12:43:19.543 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.User, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 12:43:19.545 +03:00 [INF] Executed action web_api_4.Controllers.UsersController.getAllUsers (web api 4) in 25.0834ms
2024-08-29 12:43:19.546 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.UsersController.getAllUsers (web api 4)'
2024-08-29 12:43:19.547 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Users - 200 null application/json; charset=utf-8 37.7005ms
2024-08-29 13:14:02.995 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:14:03.075 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:14:03.076 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:14:03.077 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:14:03.078 +03:00 [INF] Hosting environment: Development
2024-08-29 13:14:03.078 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:14:03.394 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:14:03.566 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 172.0881ms
2024-08-29 13:14:03.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:14:03.590 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:14:03.593 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 4.167ms
2024-08-29 13:14:03.613 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.3746ms
2024-08-29 13:14:03.664 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:14:03.761 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.0265ms
2024-08-29 13:14:22.944 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:14:23.014 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:14:23.016 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:14:23.018 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:14:23.019 +03:00 [INF] Hosting environment: Development
2024-08-29 13:14:23.019 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:14:23.398 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:14:23.545 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 147.5248ms
2024-08-29 13:14:23.569 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:14:23.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:14:23.575 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 5.0162ms
2024-08-29 13:14:23.596 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.945ms
2024-08-29 13:14:23.660 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:14:23.758 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.4101ms
2024-08-29 13:15:09.160 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:15:09.226 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:15:09.227 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:15:09.229 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:15:09.229 +03:00 [INF] Hosting environment: Development
2024-08-29 13:15:09.230 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:15:09.477 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:15:09.599 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 123.1591ms
2024-08-29 13:15:09.623 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:15:09.626 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:15:09.631 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 5.1533ms
2024-08-29 13:15:09.647 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.8481ms
2024-08-29 13:15:09.684 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:15:09.792 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 108.0941ms
2024-08-29 13:17:35.033 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:17:35.099 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:17:35.101 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:17:35.103 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:17:35.104 +03:00 [INF] Hosting environment: Development
2024-08-29 13:17:35.104 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:17:35.410 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:17:35.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 173.6164ms
2024-08-29 13:17:35.603 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:17:35.603 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:17:35.607 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 3.9541ms
2024-08-29 13:17:35.635 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.5161ms
2024-08-29 13:17:35.685 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:17:35.772 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.2592ms
2024-08-29 13:17:48.486 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:17:48.555 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:17:48.558 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:17:48.559 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:17:48.560 +03:00 [INF] Hosting environment: Development
2024-08-29 13:17:48.560 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:17:48.833 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:17:48.973 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 140.6537ms
2024-08-29 13:17:49.005 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:17:49.006 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:17:49.012 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 6.6712ms
2024-08-29 13:17:49.025 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.6469ms
2024-08-29 13:17:49.083 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:17:49.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.2189ms
2024-08-29 13:18:20.333 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:18:20.398 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:18:20.401 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:18:20.402 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:18:20.403 +03:00 [INF] Hosting environment: Development
2024-08-29 13:18:20.403 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:18:20.645 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:18:20.769 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 124.8365ms
2024-08-29 13:18:20.856 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:18:20.857 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:18:20.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 6.5941ms
2024-08-29 13:18:20.876 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.4216ms
2024-08-29 13:18:20.922 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:18:21.017 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.5882ms
2024-08-29 13:19:02.551 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:19:02.618 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:19:02.618 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:19:02.620 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:19:02.620 +03:00 [INF] Hosting environment: Development
2024-08-29 13:19:02.621 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:19:02.869 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:19:03.000 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 131.84ms
2024-08-29 13:19:03.036 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:19:03.036 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:19:03.042 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 5.2473ms
2024-08-29 13:19:03.060 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.5206ms
2024-08-29 13:19:03.135 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:19:03.234 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.832ms
2024-08-29 13:22:25.754 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:22:25.821 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:22:25.822 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:22:25.825 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:22:25.825 +03:00 [INF] Hosting environment: Development
2024-08-29 13:22:25.826 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:22:26.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:22:26.223 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 146.0186ms
2024-08-29 13:22:26.255 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:22:26.255 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:22:26.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 5.5407ms
2024-08-29 13:22:26.274 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.8016ms
2024-08-29 13:22:26.381 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:22:26.458 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 77.879ms
2024-08-29 13:22:44.063 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:22:44.132 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:22:44.133 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:22:44.135 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:22:44.136 +03:00 [INF] Hosting environment: Development
2024-08-29 13:22:44.136 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:22:44.474 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:22:44.612 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 137.6647ms
2024-08-29 13:22:44.637 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:22:44.637 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:22:44.643 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 5.9551ms
2024-08-29 13:22:44.666 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.3505ms
2024-08-29 13:22:44.815 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:22:44.911 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 95.5742ms
2024-08-29 13:23:39.155 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:23:39.161 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 6.5278ms
2024-08-29 13:23:39.189 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:23:39.193 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:23:39.196 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 3.556ms
2024-08-29 13:23:39.199 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.883ms
2024-08-29 13:23:39.295 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:23:39.302 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.0593ms
2024-08-29 13:23:56.860 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 13:23:56.938 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 13:23:56.939 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 13:23:56.941 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 13:23:56.943 +03:00 [INF] Hosting environment: Development
2024-08-29 13:23:56.943 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 13:23:57.196 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 13:23:57.324 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 128.2804ms
2024-08-29 13:23:57.348 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 13:23:57.348 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 13:23:57.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 6.2638ms
2024-08-29 13:23:57.368 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.9186ms
2024-08-29 13:23:57.454 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 13:23:57.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.6124ms
2024-08-29 15:48:15.322 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 15:48:15.441 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 15:48:15.442 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 15:48:15.444 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 15:48:15.445 +03:00 [INF] Hosting environment: Development
2024-08-29 15:48:15.445 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 15:48:15.974 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 15:48:16.148 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 175.7545ms
2024-08-29 15:48:16.190 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 15:48:16.190 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 15:48:16.196 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 6.0909ms
2024-08-29 15:48:16.222 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.2599ms
2024-08-29 15:48:16.282 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 15:48:16.405 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 123.058ms
2024-08-29 15:48:34.559 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 15:48:34.568 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 15:48:34.585 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 15:48:35.598 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 15:48:35.643 +03:00 [INF] success yay
2024-08-29 15:48:35.651 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 15:48:35.668 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 1075.5191ms
2024-08-29 15:48:35.673 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 15:48:35.683 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 1123.6778ms
2024-08-29 16:07:02.470 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 16:07:02.519 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 49.8749ms
2024-08-29 16:07:02.556 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 16:07:02.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 16:07:02.562 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 5.5162ms
2024-08-29 16:07:02.574 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.5347ms
2024-08-29 16:07:02.673 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 16:07:02.687 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.7642ms
2024-08-29 16:09:16.054 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:09:16.061 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:09:16.063 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:09:16.065 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:09:16.096 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:09:16.099 +03:00 [INF] success yay
2024-08-29 16:09:16.101 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:09:16.104 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 36.9576ms
2024-08-29 16:09:16.105 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:09:16.106 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 51.5768ms
2024-08-29 16:09:22.173 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/21 - null null
2024-08-29 16:09:22.175 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:09:22.176 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/21 - 204 null null 3.2482ms
2024-08-29 16:09:22.178 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/21 - null null
2024-08-29 16:09:22.180 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:09:22.181 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:09:22.192 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:09:22.362 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:09:22.439 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:09:22.460 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 16:09:22.464 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 270.1318ms
2024-08-29 16:09:22.468 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:09:22.473 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/21 - 499 null null 295.0919ms
2024-08-29 16:09:27.286 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:09:27.291 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:09:27.293 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:09:27.294 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:09:27.298 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:09:27.301 +03:00 [INF] success yay
2024-08-29 16:09:27.302 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:09:27.303 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 7.971ms
2024-08-29 16:09:27.304 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:09:27.306 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 19.0927ms
2024-08-29 16:14:07.939 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:14:07.942 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:14:07.942 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:14:07.944 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:14:07.951 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:14:07.953 +03:00 [INF] success yay
2024-08-29 16:14:07.955 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:14:07.958 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 11.21ms
2024-08-29 16:14:07.959 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:14:07.961 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 21.4022ms
2024-08-29 16:16:02.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:16:02.581 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:16:02.582 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:16:02.583 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:16:02.591 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:16:02.594 +03:00 [INF] success yay
2024-08-29 16:16:02.595 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:16:02.596 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 11.5986ms
2024-08-29 16:16:02.598 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:16:02.599 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 28.9705ms
2024-08-29 16:16:15.461 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:16:15.464 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:16:15.465 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:16:15.466 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:16:15.470 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:16:15.475 +03:00 [INF] success yay
2024-08-29 16:16:15.475 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:16:15.477 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 8.3541ms
2024-08-29 16:16:15.478 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:16:15.479 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 17.2688ms
2024-08-29 16:16:18.710 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/13 - null null
2024-08-29 16:16:18.714 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:16:18.715 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/13 - 204 null null 4.9389ms
2024-08-29 16:16:18.717 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/13 - null null
2024-08-29 16:16:18.720 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:16:18.722 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:16:18.723 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:16:18.731 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:16:18.745 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:16:18.750 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 16:16:18.751 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 26.4747ms
2024-08-29 16:16:18.752 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:16:18.753 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/13 - 204 null null 36.1387ms
2024-08-29 16:17:52.664 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:17:52.671 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:17:52.673 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:17:52.675 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:17:52.682 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:17:52.685 +03:00 [INF] success yay
2024-08-29 16:17:52.686 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:17:52.688 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 9.58ms
2024-08-29 16:17:52.691 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:17:52.692 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 28.5908ms
2024-08-29 16:17:56.230 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:17:56.232 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:17:56.233 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 2.6182ms
2024-08-29 16:17:56.234 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:17:56.237 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:17:56.238 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:17:56.239 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:17:56.244 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:17:56.262 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:17:56.297 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:17:56.312 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 70.9945ms
2024-08-29 16:17:56.315 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:17:56.317 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:17:56.359 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 125.1053ms
2024-08-29 16:18:32.658 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:18:32.661 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:18:32.663 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:18:32.665 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:18:32.671 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:18:32.673 +03:00 [INF] success yay
2024-08-29 16:18:32.675 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:18:32.677 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 8.5111ms
2024-08-29 16:18:32.678 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:18:32.679 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 20.6335ms
2024-08-29 16:18:38.129 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:18:38.131 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:18:38.132 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 2.8324ms
2024-08-29 16:18:38.133 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:18:38.136 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:18:38.136 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:18:38.137 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:18:38.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:18:38.143 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:18:38.146 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:18:38.170 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 31.3133ms
2024-08-29 16:18:38.174 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:18:38.175 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:18:38.186 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 53.2296ms
2024-08-29 16:18:40.447 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:18:40.450 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:18:40.451 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:18:40.454 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:18:40.460 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:18:40.464 +03:00 [INF] success yay
2024-08-29 16:18:40.465 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:18:40.467 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 8.617ms
2024-08-29 16:18:40.469 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:18:40.471 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 24.0286ms
2024-08-29 16:19:17.854 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:19:17.858 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:19:17.859 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:19:17.861 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:19:17.870 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:19:17.872 +03:00 [INF] success yay
2024-08-29 16:19:17.873 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:19:17.874 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 10.2583ms
2024-08-29 16:19:17.875 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:19:17.876 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 21.8766ms
2024-08-29 16:19:20.742 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:19:20.746 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:19:20.747 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 4.9142ms
2024-08-29 16:19:20.749 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:19:20.751 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:19:20.752 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:19:20.752 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:19:20.757 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:19:20.772 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:19:20.774 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:19:20.785 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 31.102ms
2024-08-29 16:19:20.787 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:19:20.788 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:19:20.803 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 53.7792ms
2024-08-29 16:19:23.336 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:19:23.339 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:19:23.340 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:19:23.341 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:19:23.345 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:19:23.347 +03:00 [INF] success yay
2024-08-29 16:19:23.349 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:19:23.351 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 8.1582ms
2024-08-29 16:19:23.352 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:19:23.354 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 17.7016ms
2024-08-29 16:19:33.162 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:19:33.164 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:19:33.165 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 2.6309ms
2024-08-29 16:19:33.166 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:19:33.171 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:19:33.171 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:19:33.172 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:19:33.175 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:19:33.180 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:19:33.183 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:19:33.193 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 19.7973ms
2024-08-29 16:19:33.193 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:19:33.195 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:19:33.209 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 42.976ms
2024-08-29 16:19:34.907 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:19:34.911 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:19:34.913 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:19:34.914 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:19:34.919 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:19:34.921 +03:00 [INF] success yay
2024-08-29 16:19:34.922 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:19:34.924 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 6.5514ms
2024-08-29 16:19:34.925 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:19:34.926 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 18.5745ms
2024-08-29 16:22:32.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:22:32.338 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:22:32.341 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:22:32.342 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:22:32.350 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:22:32.355 +03:00 [INF] success yay
2024-08-29 16:22:32.356 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:22:32.358 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 14.0156ms
2024-08-29 16:22:32.359 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:22:32.359 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 27.3963ms
2024-08-29 16:22:35.371 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:22:35.373 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:22:35.374 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 3.2438ms
2024-08-29 16:22:35.376 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:22:35.379 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:22:35.380 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:22:35.381 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:22:35.388 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:22:35.401 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:22:35.404 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:22:35.415 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 32.1572ms
2024-08-29 16:22:35.416 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:22:35.418 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:22:35.435 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 58.7752ms
2024-08-29 16:22:36.963 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:22:36.967 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:22:36.968 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:22:36.969 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:22:36.975 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:22:36.978 +03:00 [INF] success yay
2024-08-29 16:22:36.978 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:22:36.980 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 7.588ms
2024-08-29 16:22:36.981 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:22:36.982 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 18.9737ms
2024-08-29 16:23:05.773 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:23:05.775 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:05.776 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:23:05.777 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:23:05.781 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:23:05.783 +03:00 [INF] success yay
2024-08-29 16:23:05.784 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:23:05.785 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 5.88ms
2024-08-29 16:23:05.787 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:23:05.787 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 14.7206ms
2024-08-29 16:23:08.151 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:23:08.154 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:08.154 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 2.8988ms
2024-08-29 16:23:08.156 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:23:08.158 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:08.159 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:08.160 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:23:08.164 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:23:08.170 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:23:08.172 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:23:08.181 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 19.826ms
2024-08-29 16:23:08.183 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:08.183 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:23:08.191 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 34.8952ms
2024-08-29 16:23:28.762 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:23:28.766 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:28.767 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 4.203ms
2024-08-29 16:23:28.768 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:23:28.773 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:28.775 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:28.776 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:23:28.784 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:23:28.799 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:23:28.807 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:23:28.813 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 34.3165ms
2024-08-29 16:23:28.814 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:28.815 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:23:28.823 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 55.0555ms
2024-08-29 16:23:46.986 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:23:46.993 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:46.994 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 7.9846ms
2024-08-29 16:23:46.997 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:23:47.002 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:47.003 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:47.005 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:23:47.015 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:23:47.026 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:23:47.035 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:23:47.048 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 35.4531ms
2024-08-29 16:23:47.050 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:47.050 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:23:47.061 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 63.3603ms
2024-08-29 16:23:52.688 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/4 - null null
2024-08-29 16:23:52.690 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:52.690 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/4 - 204 null null 2.67ms
2024-08-29 16:23:52.695 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/4 - null null
2024-08-29 16:23:52.700 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:52.702 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:52.706 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:23:52.710 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:23:52.716 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:23:52.718 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:23:52.727 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 19.3209ms
2024-08-29 16:23:52.729 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:52.731 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:23:52.740 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/4 - 500 null text/plain; charset=utf-8 44.9524ms
2024-08-29 16:23:55.011 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/4 - null null
2024-08-29 16:23:55.016 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:55.017 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:55.018 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:23:55.026 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:23:55.035 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:23:55.038 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:23:55.049 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 24.9681ms
2024-08-29 16:23:55.050 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:55.051 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:23:55.061 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/4 - 500 null text/plain; charset=utf-8 50.129ms
2024-08-29 16:23:57.611 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/11 - null null
2024-08-29 16:23:57.615 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:57.616 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/11 - 204 null null 4.528ms
2024-08-29 16:23:57.618 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/11 - null null
2024-08-29 16:23:57.623 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:57.624 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:57.626 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:23:57.629 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:23:57.633 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:23:57.638 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 16:23:57.639 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 11.7276ms
2024-08-29 16:23:57.643 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:57.647 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/11 - 204 null null 29.1503ms
2024-08-29 16:23:59.172 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/4 - null null
2024-08-29 16:23:59.176 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:59.176 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/4 - 204 null null 4.3991ms
2024-08-29 16:23:59.177 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/4 - null null
2024-08-29 16:23:59.187 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:59.188 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:59.189 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:23:59.191 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:23:59.201 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:23:59.205 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:23:59.224 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 33.9965ms
2024-08-29 16:23:59.227 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:59.227 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:23:59.238 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/4 - 500 null text/plain; charset=utf-8 60.2166ms
2024-08-29 16:23:59.968 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/3 - null null
2024-08-29 16:23:59.971 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:59.972 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/3 - 204 null null 4.1594ms
2024-08-29 16:23:59.973 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/3 - null null
2024-08-29 16:23:59.979 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:23:59.980 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:23:59.981 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:23:59.988 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:24:00.020 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:24:00.024 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:24:00.036 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 51.4298ms
2024-08-29 16:24:00.038 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:24:00.039 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:24:00.063 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/3 - 500 null text/plain; charset=utf-8 89.6399ms
2024-08-29 16:24:01.726 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/11 - null null
2024-08-29 16:24:01.729 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:24:01.730 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:24:01.731 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:24:01.738 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:24:01.740 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-08-29 16:24:01.760 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 27.7801ms
2024-08-29 16:24:01.761 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:24:01.762 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/11 - 404 null application/problem+json; charset=utf-8 36.6553ms
2024-08-29 16:24:10.187 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:24:10.191 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:24:10.191 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 4.2179ms
2024-08-29 16:24:10.194 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:24:10.203 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:24:10.203 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:24:10.204 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:24:10.211 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:24:10.220 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:24:10.224 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:24:10.232 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 22.948ms
2024-08-29 16:24:10.233 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:24:10.234 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cef902f9-e62d-485a-bacd-edcc387d0a2e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:24:10.244 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 49.3628ms
2024-08-29 16:25:56.765 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 16:25:56.884 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 16:25:56.886 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 16:25:56.888 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 16:25:56.889 +03:00 [INF] Hosting environment: Development
2024-08-29 16:25:56.890 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 16:25:57.174 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 16:25:57.359 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 185.9454ms
2024-08-29 16:25:57.398 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 16:25:57.400 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 16:25:57.405 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 6.6383ms
2024-08-29 16:25:57.427 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.7318ms
2024-08-29 16:25:57.560 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 16:25:57.677 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 116.9187ms
2024-08-29 16:26:05.901 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:26:05.912 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:26:05.919 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:26:05.933 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:26:06.862 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:26:06.916 +03:00 [INF] success yay
2024-08-29 16:26:06.921 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:26:06.939 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 1000.9656ms
2024-08-29 16:26:06.940 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:26:06.948 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 1047.3321ms
2024-08-29 16:26:11.209 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:26:11.219 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:26:11.221 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 12.595ms
2024-08-29 16:26:11.223 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:26:11.235 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:26:11.237 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:26:11.247 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:26:11.336 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:26:11.391 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:26:11.409 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:26:11.422 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 167.925ms
2024-08-29 16:26:11.423 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:26:11.424 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:26:11.439 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 216.3513ms
2024-08-29 16:26:28.097 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:26:28.127 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:26:28.133 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 35.8684ms
2024-08-29 16:26:28.135 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:26:28.140 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:26:28.142 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:26:28.145 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:26:28.200 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:26:28.208 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:26:28.211 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:26:28.220 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 72.3736ms
2024-08-29 16:26:28.221 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:26:28.222 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:26:28.233 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 97.808ms
2024-08-29 16:27:12.600 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:27:12.612 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:27:12.613 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:27:12.617 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:27:12.629 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:27:12.644 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:27:12.650 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:27:12.657 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 33.1863ms
2024-08-29 16:27:12.659 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:27:12.660 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:27:12.669 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 69.1915ms
2024-08-29 16:27:40.169 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 16:27:40.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 11.9368ms
2024-08-29 16:27:40.214 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 16:27:40.217 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 2.8862ms
2024-08-29 16:27:40.226 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 16:27:40.238 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.5094ms
2024-08-29 16:27:40.309 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 16:27:40.317 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.4401ms
2024-08-29 16:27:47.619 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:27:47.626 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:27:47.628 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:27:47.629 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:27:47.636 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:27:47.651 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:27:47.655 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:27:47.668 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 36.2422ms
2024-08-29 16:27:47.670 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:27:47.672 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:f7fce12f-0899-4e31-9fd3-1c9527ceeeb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:27:47.688 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 68.5984ms
2024-08-29 16:28:35.923 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 16:28:36.042 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 16:28:36.044 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 16:28:36.047 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 16:28:36.049 +03:00 [INF] Hosting environment: Development
2024-08-29 16:28:36.049 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 16:28:36.484 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 16:28:36.678 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 192.5984ms
2024-08-29 16:28:36.741 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 16:28:36.742 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 16:28:36.748 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 5.2204ms
2024-08-29 16:28:36.775 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.7629ms
2024-08-29 16:28:36.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 16:28:37.003 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 174.0445ms
2024-08-29 16:28:45.605 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:28:45.619 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:28:45.627 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:28:45.660 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:28:47.947 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__p_0
2024-08-29 16:28:48.235 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:28:48.281 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:d563e43d-a6de-453c-8d69-b47a41d848fc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:d563e43d-a6de-453c-8d69-b47a41d848fc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:28:48.304 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 2633.1062ms
2024-08-29 16:28:48.307 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:28:48.310 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:d563e43d-a6de-453c-8d69-b47a41d848fc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:28:48.373 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 2768.1139ms
2024-08-29 16:30:35.983 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 16:30:36.054 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 16:30:36.055 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 16:30:36.058 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 16:30:36.058 +03:00 [INF] Hosting environment: Development
2024-08-29 16:30:36.059 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 16:30:36.372 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 16:30:36.506 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 134.361ms
2024-08-29 16:30:36.525 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 16:30:36.529 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 3.2262ms
2024-08-29 16:30:36.530 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 16:30:36.551 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.3927ms
2024-08-29 16:30:36.598 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 16:30:36.713 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 114.9274ms
2024-08-29 16:36:25.607 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 16:36:25.684 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 16:36:25.685 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 16:36:25.686 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 16:36:25.687 +03:00 [INF] Hosting environment: Development
2024-08-29 16:36:25.687 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 16:36:25.877 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 16:36:26.050 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 173.1709ms
2024-08-29 16:36:26.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 16:36:26.079 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 16:36:26.082 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 3.7235ms
2024-08-29 16:36:26.098 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.8337ms
2024-08-29 16:36:26.168 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 16:36:26.250 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.3768ms
2024-08-29 16:36:55.309 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:36:55.320 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:36:55.332 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:36:56.359 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:36:56.445 +03:00 [INF] success yay
2024-08-29 16:36:56.452 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:36:56.473 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 1136.4767ms
2024-08-29 16:36:56.474 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:36:56.484 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 1174.9164ms
2024-08-29 16:37:06.602 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/10 - null null
2024-08-29 16:37:06.609 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:37:06.610 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:37:06.616 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:37:06.735 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:37:06.839 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:37:06.849 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 16:37:06.850 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 233.2918ms
2024-08-29 16:37:06.850 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:37:06.851 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/10 - 204 null null 248.9456ms
2024-08-29 16:37:23.582 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:37:23.584 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:37:23.584 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:37:23.585 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:37:23.646 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:37:23.647 +03:00 [INF] success yay
2024-08-29 16:37:23.648 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:37:23.649 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 62.9334ms
2024-08-29 16:37:23.649 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:37:23.650 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 67.534ms
2024-08-29 16:37:41.159 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:37:41.161 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:37:41.162 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 3.0875ms
2024-08-29 16:37:41.163 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:37:41.166 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:37:41.166 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:37:41.167 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:37:41.174 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:37:41.180 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:37:41.194 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:37:41.199 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 31.3293ms
2024-08-29 16:37:41.200 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:37:41.200 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:37:41.219 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 55.6179ms
2024-08-29 16:37:59.415 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:37:59.418 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:37:59.420 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:37:59.425 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:37:59.427 +03:00 [INF] success yay
2024-08-29 16:37:59.427 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:37:59.429 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 7.2545ms
2024-08-29 16:37:59.429 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:37:59.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 14.634ms
2024-08-29 16:38:09.031 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:38:09.034 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:38:09.035 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:38:09.035 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:38:09.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:38:09.042 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:38:09.044 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:38:09.047 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 11.0025ms
2024-08-29 16:38:09.048 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:38:09.049 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:38:09.054 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 23.1158ms
2024-08-29 16:38:53.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 16:38:53.903 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 7.2045ms
2024-08-29 16:38:53.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 16:38:53.939 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 1.9173ms
2024-08-29 16:38:53.939 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 16:38:53.948 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.1682ms
2024-08-29 16:38:54.022 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 16:38:54.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.0929ms
2024-08-29 16:38:57.844 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:38:57.847 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:38:57.849 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:38:57.852 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:38:57.853 +03:00 [INF] success yay
2024-08-29 16:38:57.854 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:38:57.855 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 5.4365ms
2024-08-29 16:38:57.857 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:38:57.857 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 13.0589ms
2024-08-29 16:39:20.377 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:39:20.378 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:39:20.379 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:39:20.379 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:39:20.382 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:39:20.383 +03:00 [INF] success yay
2024-08-29 16:39:20.384 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:39:20.386 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 5.689ms
2024-08-29 16:39:20.387 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:39:20.388 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 10.8317ms
2024-08-29 16:39:22.988 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:39:22.990 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:39:22.991 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 3.0088ms
2024-08-29 16:39:22.992 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:39:22.994 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:39:22.994 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:39:22.995 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:39:22.998 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:39:23.006 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:39:23.008 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:39:23.012 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 16.1788ms
2024-08-29 16:39:23.012 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:39:23.013 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:39:23.018 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 26.0236ms
2024-08-29 16:39:33.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:39:33.046 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:39:33.047 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:39:33.048 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:39:33.049 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:39:33.050 +03:00 [INF] success yay
2024-08-29 16:39:33.051 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:39:33.051 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 3.1587ms
2024-08-29 16:39:33.052 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:39:33.053 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 8.3517ms
2024-08-29 16:39:50.759 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:39:50.762 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:39:50.762 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 3.2807ms
2024-08-29 16:39:50.764 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:39:50.765 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:39:50.766 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:39:50.766 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:39:50.771 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:39:50.776 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:39:50.778 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:39:50.781 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 14.1805ms
2024-08-29 16:39:50.782 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:39:50.782 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:39:50.788 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 24.0747ms
2024-08-29 16:40:20.284 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:40:20.286 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:40:20.287 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:40:20.289 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:40:20.293 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:40:20.297 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:40:20.298 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:40:20.304 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 13.5756ms
2024-08-29 16:40:20.304 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:40:20.305 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:40:20.310 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 26.5855ms
2024-08-29 16:40:48.544 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7192/api/Categories/add - multipart/form-data; boundary=----WebKitFormBoundaryYANEVW2LqdkLD6kl 204416
2024-08-29 16:40:48.546 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:40:48.548 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:40:48.552 +03:00 [INF] Route matched with {action = "addCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult addCategory(web_api_4.DTOs.CategoriesRequestDto) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:40:48.615 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryImage], [CategoryName])
OUTPUT INSERTED.[CategoryID]
VALUES (@p0, @p1);
2024-08-29 16:40:48.630 +03:00 [INF] Executing OkObjectResult, writing value of type 'web_api_4.Models.Category'.
2024-08-29 16:40:48.632 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.addCategory (web api 4) in 78.5635ms
2024-08-29 16:40:48.633 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:40:48.634 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7192/api/Categories/add - 200 null application/json; charset=utf-8 90.3207ms
2024-08-29 16:40:51.871 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7192/api/Categories/add - multipart/form-data; boundary=----WebKitFormBoundaryTdrAY9xiae9DghiA 121318
2024-08-29 16:40:51.874 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:40:51.875 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:40:51.876 +03:00 [INF] Route matched with {action = "addCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult addCategory(web_api_4.DTOs.CategoriesRequestDto) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:40:51.882 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryImage], [CategoryName])
OUTPUT INSERTED.[CategoryID]
VALUES (@p0, @p1);
2024-08-29 16:40:51.883 +03:00 [INF] Executing OkObjectResult, writing value of type 'web_api_4.Models.Category'.
2024-08-29 16:40:51.884 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.addCategory (web api 4) in 8.048ms
2024-08-29 16:40:51.885 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:40:51.886 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7192/api/Categories/add - 200 null application/json; charset=utf-8 15.4466ms
2024-08-29 16:40:56.542 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7192/api/Categories/add - multipart/form-data; boundary=----WebKitFormBoundaryXueWffi8LFtCk0eE 142804
2024-08-29 16:40:56.545 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:40:56.546 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:40:56.546 +03:00 [INF] Route matched with {action = "addCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult addCategory(web_api_4.DTOs.CategoriesRequestDto) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:40:56.553 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryImage], [CategoryName])
OUTPUT INSERTED.[CategoryID]
VALUES (@p0, @p1);
2024-08-29 16:40:56.556 +03:00 [INF] Executing OkObjectResult, writing value of type 'web_api_4.Models.Category'.
2024-08-29 16:40:56.557 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.addCategory (web api 4) in 9.1312ms
2024-08-29 16:40:56.557 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:40:56.558 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7192/api/Categories/add - 200 null application/json; charset=utf-8 15.7992ms
2024-08-29 16:41:00.768 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7192/api/Categories/add - multipart/form-data; boundary=----WebKitFormBoundaryHDG80u71phNHFZTg 5078158
2024-08-29 16:41:00.770 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:41:00.771 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:41:00.771 +03:00 [INF] Route matched with {action = "addCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult addCategory(web_api_4.DTOs.CategoriesRequestDto) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:41:00.805 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryImage], [CategoryName])
OUTPUT INSERTED.[CategoryID]
VALUES (@p0, @p1);
2024-08-29 16:41:00.807 +03:00 [INF] Executing OkObjectResult, writing value of type 'web_api_4.Models.Category'.
2024-08-29 16:41:00.808 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.addCategory (web api 4) in 35.4403ms
2024-08-29 16:41:00.809 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:41:00.810 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7192/api/Categories/add - 200 null application/json; charset=utf-8 42.1077ms
2024-08-29 16:41:05.388 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7192/api/Categories/add - multipart/form-data; boundary=----WebKitFormBoundaryR7jpZAA9ksh1hAD4 158541
2024-08-29 16:41:05.390 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:41:05.391 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:41:05.392 +03:00 [INF] Route matched with {action = "addCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult addCategory(web_api_4.DTOs.CategoriesRequestDto) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:41:05.399 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryImage], [CategoryName])
OUTPUT INSERTED.[CategoryID]
VALUES (@p0, @p1);
2024-08-29 16:41:05.401 +03:00 [INF] Executing OkObjectResult, writing value of type 'web_api_4.Models.Category'.
2024-08-29 16:41:05.401 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.addCategory (web api 4) in 7.6577ms
2024-08-29 16:41:05.402 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.addCategory (web api 4)'
2024-08-29 16:41:05.403 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7192/api/Categories/add - 200 null application/json; charset=utf-8 15.0661ms
2024-08-29 16:41:07.598 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:41:07.600 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:41:07.600 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:41:07.601 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:41:07.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:41:07.606 +03:00 [INF] success yay
2024-08-29 16:41:07.606 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:41:07.607 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 4.8764ms
2024-08-29 16:41:07.609 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:41:07.610 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 11.7518ms
2024-08-29 16:41:19.491 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/26 - null null
2024-08-29 16:41:19.493 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:41:19.494 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/26 - 204 null null 2.9161ms
2024-08-29 16:41:19.495 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/26 - null null
2024-08-29 16:41:19.498 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:41:19.499 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:41:19.500 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:41:19.506 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:41:19.512 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:41:19.516 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 16:41:19.517 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 14.9881ms
2024-08-29 16:41:19.518 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:41:19.518 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/26 - 204 null null 23.0952ms
2024-08-29 16:41:32.044 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:41:32.046 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:41:32.047 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:41:32.050 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:41:32.053 +03:00 [INF] success yay
2024-08-29 16:41:32.053 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:41:32.054 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 6.105ms
2024-08-29 16:41:32.055 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:41:32.056 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 11.6275ms
2024-08-29 16:41:46.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:41:46.381 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:41:46.382 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:41:46.382 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:41:46.384 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:41:46.385 +03:00 [INF] success yay
2024-08-29 16:41:46.386 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:41:46.386 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 3.2264ms
2024-08-29 16:41:46.387 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:41:46.387 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 7.3959ms
2024-08-29 16:41:53.780 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/25 - null null
2024-08-29 16:41:53.784 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:41:53.785 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/25 - 204 null null 4.4589ms
2024-08-29 16:41:53.787 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/25 - null null
2024-08-29 16:41:53.789 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:41:53.790 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:41:53.790 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:41:53.794 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:41:53.798 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:41:53.800 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 16:41:53.801 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 8.7171ms
2024-08-29 16:41:53.801 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:41:53.802 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/25 - 204 null null 15.0258ms
2024-08-29 16:42:37.443 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:42:37.444 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:42:37.445 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:42:37.446 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:42:37.451 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:42:37.453 +03:00 [INF] success yay
2024-08-29 16:42:37.453 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:42:37.454 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 6.0834ms
2024-08-29 16:42:37.454 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:42:37.455 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 12.1188ms
2024-08-29 16:42:49.278 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/24 - null null
2024-08-29 16:42:49.280 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:42:49.280 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/24 - 204 null null 2.8335ms
2024-08-29 16:42:49.281 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/24 - null null
2024-08-29 16:42:49.285 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:42:49.285 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:42:49.286 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:42:49.289 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:42:49.294 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:42:49.296 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 16:42:49.296 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 9.7096ms
2024-08-29 16:42:49.297 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:42:49.297 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/24 - 204 null null 15.947ms
2024-08-29 16:42:52.854 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:42:52.857 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:42:52.858 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:42:52.859 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:42:52.863 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:42:52.865 +03:00 [INF] success yay
2024-08-29 16:42:52.866 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:42:52.867 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 4.623ms
2024-08-29 16:42:52.868 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:42:52.868 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 14.6644ms
2024-08-29 16:43:14.486 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:43:14.487 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:43:14.487 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:43:14.488 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:43:14.491 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:43:14.492 +03:00 [INF] success yay
2024-08-29 16:43:14.493 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:43:14.494 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 5.2748ms
2024-08-29 16:43:14.496 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:43:14.497 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 11.3443ms
2024-08-29 16:43:17.334 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/23 - null null
2024-08-29 16:43:17.336 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:43:17.337 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/23 - 204 null null 2.9108ms
2024-08-29 16:43:17.337 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/23 - null null
2024-08-29 16:43:17.339 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:43:17.339 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:43:17.340 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:43:17.344 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:43:17.350 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:43:17.351 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 16:43:17.351 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 10.928ms
2024-08-29 16:43:17.352 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:43:17.353 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/23 - 499 null null 15.212ms
2024-08-29 16:43:17.399 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:43:17.401 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:43:17.402 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:43:17.402 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:43:17.405 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:43:17.406 +03:00 [INF] success yay
2024-08-29 16:43:17.406 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:43:17.407 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 3.5862ms
2024-08-29 16:43:17.408 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:43:17.408 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 8.7906ms
2024-08-29 16:43:54.062 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:43:54.064 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:43:54.065 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:43:54.065 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:43:54.067 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:43:54.069 +03:00 [INF] success yay
2024-08-29 16:43:54.069 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:43:54.070 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 3.8179ms
2024-08-29 16:43:54.071 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:43:54.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 9.284ms
2024-08-29 16:43:57.476 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/22 - null null
2024-08-29 16:43:57.479 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:43:57.479 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/22 - 204 null null 2.9647ms
2024-08-29 16:43:57.480 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/22 - null null
2024-08-29 16:43:57.482 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:43:57.482 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:43:57.483 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:43:57.485 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:43:57.488 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:43:57.489 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 16:43:57.489 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 5.7826ms
2024-08-29 16:43:57.490 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:43:57.490 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/22 - 204 null null 10.1484ms
2024-08-29 16:44:01.144 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:44:01.145 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:01.146 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:01.146 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:01.148 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:44:01.149 +03:00 [INF] success yay
2024-08-29 16:44:01.150 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:44:01.151 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 3.2673ms
2024-08-29 16:44:01.151 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:01.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 7.628ms
2024-08-29 16:44:07.463 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:44:07.465 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:07.465 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:07.466 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:07.468 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:44:07.469 +03:00 [INF] success yay
2024-08-29 16:44:07.470 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:44:07.471 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 4.2921ms
2024-08-29 16:44:07.471 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:07.472 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 8.4485ms
2024-08-29 16:44:09.973 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:44:09.976 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:09.977 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 4.0515ms
2024-08-29 16:44:09.978 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:44:09.979 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:09.979 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:44:09.980 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:09.982 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:44:09.986 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:44:09.987 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:44:09.990 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 9.2148ms
2024-08-29 16:44:09.990 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:44:09.991 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:44:09.996 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 18.2794ms
2024-08-29 16:44:11.238 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:44:11.239 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:11.240 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:11.240 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:11.242 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:44:11.243 +03:00 [INF] success yay
2024-08-29 16:44:11.243 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:44:11.244 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 2.9002ms
2024-08-29 16:44:11.245 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:11.245 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 7.073ms
2024-08-29 16:44:13.939 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:44:13.940 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:13.941 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:13.941 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:13.943 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:44:13.944 +03:00 [INF] success yay
2024-08-29 16:44:13.945 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:44:13.946 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 3.9399ms
2024-08-29 16:44:13.947 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:13.948 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 8.9271ms
2024-08-29 16:44:19.885 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:44:19.888 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:19.889 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 3.909ms
2024-08-29 16:44:19.891 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:44:19.893 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:19.893 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:44:19.894 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:19.898 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:44:19.902 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:44:19.903 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:44:19.907 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 12.1278ms
2024-08-29 16:44:19.909 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:44:19.910 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:44:19.914 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 23.7979ms
2024-08-29 16:44:30.307 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:44:30.308 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:30.309 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:30.310 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:30.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:44:30.313 +03:00 [INF] success yay
2024-08-29 16:44:30.314 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:44:30.314 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 3.9962ms
2024-08-29 16:44:30.315 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:30.316 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 9.0468ms
2024-08-29 16:44:33.784 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:44:33.786 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:33.787 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 2.1257ms
2024-08-29 16:44:33.788 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:44:33.789 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:33.790 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:44:33.790 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:33.792 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:44:33.796 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:44:33.797 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:44:33.801 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 10.1731ms
2024-08-29 16:44:33.802 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:44:33.803 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:44:33.810 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 22.2686ms
2024-08-29 16:44:33.901 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:44:33.902 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:33.903 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:33.903 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:33.905 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:44:33.906 +03:00 [INF] success yay
2024-08-29 16:44:33.907 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:44:33.907 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 3.2512ms
2024-08-29 16:44:33.908 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:33.908 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 7.2867ms
2024-08-29 16:44:38.460 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:44:38.461 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:44:38.461 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:38.462 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:44:38.464 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:44:38.465 +03:00 [INF] success yay
2024-08-29 16:44:38.466 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:44:38.466 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 3.3114ms
2024-08-29 16:44:38.467 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:44:38.467 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 7.9077ms
2024-08-29 16:45:52.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:45:52.305 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:45:52.305 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:45:52.306 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:45:52.310 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:45:52.311 +03:00 [INF] success yay
2024-08-29 16:45:52.312 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:45:52.313 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 5.4288ms
2024-08-29 16:45:52.313 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:45:52.314 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 10.5637ms
2024-08-29 16:45:56.529 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:45:56.530 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:45:56.531 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 2.213ms
2024-08-29 16:45:56.533 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:45:56.534 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:45:56.534 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:45:56.535 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:45:56.541 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:45:56.548 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:45:56.550 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:45:56.554 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 18.4534ms
2024-08-29 16:45:56.555 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:45:56.556 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:bfa26de2-a6de-4cfb-bdee-fda942a4b732
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:45:56.562 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 29.5123ms
2024-08-29 16:45:56.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:45:56.685 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:45:56.685 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:45:56.686 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:45:56.689 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:45:56.691 +03:00 [INF] success yay
2024-08-29 16:45:56.691 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:45:56.692 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 4.5818ms
2024-08-29 16:45:56.693 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:45:56.694 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 10.5551ms
2024-08-29 16:54:23.020 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 16:54:23.021 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:54:23.022 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:54:23.023 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:54:23.031 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 16:54:23.032 +03:00 [INF] success yay
2024-08-29 16:54:23.033 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 16:54:23.034 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 9.9728ms
2024-08-29 16:54:23.035 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 16:54:23.035 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 15.5013ms
2024-08-29 16:54:28.940 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:54:28.942 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:54:28.942 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7192/api/Categories/12 - 204 null null 2.3086ms
2024-08-29 16:54:28.944 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 16:54:28.945 +03:00 [INF] CORS policy execution successful.
2024-08-29 16:54:28.945 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:54:28.946 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 16:54:28.950 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 16:54:28.956 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 16:54:28.957 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:7a0f0026-6cb7-49fc-ae58-aee30c221bfc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:7a0f0026-6cb7-49fc-ae58-aee30c221bfc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 16:54:28.963 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 16.3725ms
2024-08-29 16:54:28.964 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 16:54:28.964 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:7a0f0026-6cb7-49fc-ae58-aee30c221bfc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method37(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 16:54:28.971 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 27.3611ms
2024-08-29 17:03:10.876 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 17:03:11.038 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 17:03:11.038 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 17:03:11.040 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 17:03:11.041 +03:00 [INF] Hosting environment: Development
2024-08-29 17:03:11.041 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 17:03:11.952 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 17:03:12.174 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 227.173ms
2024-08-29 17:03:12.202 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 17:03:12.203 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 17:03:12.216 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 14.109ms
2024-08-29 17:03:12.247 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.2705ms
2024-08-29 17:03:12.286 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 17:03:12.402 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 116.1207ms
2024-08-29 17:03:19.893 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 17:03:19.903 +03:00 [INF] CORS policy execution successful.
2024-08-29 17:03:19.909 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 17:03:19.927 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 17:03:21.413 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 17:03:21.603 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 17:03:21.636 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'web_api_4.Models.MyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cee40177-e3d0-4022-917f-27c5a9a83564
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cee40177-e3d0-4022-917f-27c5a9a83564
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-08-29 17:03:27.795 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 7863.113ms
2024-08-29 17:03:27.797 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 17:03:27.799 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Product". The conflict occurred in database "web api 2", table "dbo.CartItems", column 'ProductID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:cee40177-e3d0-4022-917f-27c5a9a83564
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at web_api_4.Controllers.CategoriesController.DeleteCategory(Int32 id) in C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\Controllers\CategoriesController.cs:line 109
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 17:03:27.821 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 500 null text/plain; charset=utf-8 7928.0592ms
2024-08-29 17:11:00.264 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 17:11:00.336 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 17:11:00.337 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 17:11:00.339 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 17:11:00.340 +03:00 [INF] Hosting environment: Development
2024-08-29 17:11:00.340 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 17:11:00.888 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 17:11:01.056 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 168.7793ms
2024-08-29 17:11:01.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 17:11:01.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 17:11:01.085 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 3.8139ms
2024-08-29 17:11:01.111 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.0737ms
2024-08-29 17:11:01.166 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 17:11:01.256 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 89.3865ms
2024-08-29 17:11:05.915 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 17:11:05.926 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 17:11:05.934 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 17:11:06.634 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 17:11:06.671 +03:00 [INF] success yay
2024-08-29 17:11:06.675 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 17:11:06.687 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 749.2936ms
2024-08-29 17:11:06.690 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 17:11:06.695 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 780.0176ms
2024-08-29 17:11:18.784 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/Categories/12 - null null
2024-08-29 17:11:18.791 +03:00 [INF] CORS policy execution successful.
2024-08-29 17:11:18.792 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 17:11:18.797 +03:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCategory(Int32) on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 17:11:18.880 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryID] = @__id_0
2024-08-29 17:11:18.964 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryID] = @p0;
2024-08-29 17:11:18.977 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 17:11:18.979 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4) in 181.014ms
2024-08-29 17:11:18.981 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.DeleteCategory (web api 4)'
2024-08-29 17:11:18.982 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/Categories/12 - 204 null null 197.7229ms
2024-08-29 17:24:22.436 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categories - null null
2024-08-29 17:24:22.438 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 17:24:22.439 +03:00 [INF] Route matched with {action = "getAllCategories", controller = "Categories"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult getAllCategories() on controller web_api_4.Controllers.CategoriesController (web api 4).
2024-08-29 17:24:22.504 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryID], [c].[CategoryImage], [c].[CategoryName]
FROM [Categories] AS [c]
2024-08-29 17:24:22.506 +03:00 [INF] success yay
2024-08-29 17:24:22.508 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.Models.Category, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 17:24:22.510 +03:00 [INF] Executed action web_api_4.Controllers.CategoriesController.getAllCategories (web api 4) in 69.1643ms
2024-08-29 17:24:22.512 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CategoriesController.getAllCategories (web api 4)'
2024-08-29 17:24:22.513 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categories - 200 null application/json; charset=utf-8 77.2867ms
2024-08-29 17:47:08.874 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 17:47:08.943 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 17:47:08.945 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 17:47:08.947 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 17:47:08.947 +03:00 [INF] Hosting environment: Development
2024-08-29 17:47:08.948 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 17:47:09.171 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 17:47:09.290 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 119.2944ms
2024-08-29 17:47:09.338 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 17:47:09.342 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 4.7231ms
2024-08-29 17:47:09.346 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 17:47:09.365 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.9955ms
2024-08-29 17:47:09.617 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 17:47:09.686 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.4048ms
2024-08-29 17:47:30.883 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 17:47:30.960 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 17:47:30.962 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 17:47:30.964 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 17:47:30.966 +03:00 [INF] Hosting environment: Development
2024-08-29 17:47:30.967 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 17:47:31.384 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 17:47:31.541 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 157.7794ms
2024-08-29 17:47:31.566 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 17:47:31.566 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 17:47:31.570 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 4.1235ms
2024-08-29 17:47:31.591 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.8435ms
2024-08-29 17:47:31.641 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 17:47:31.716 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 75.167ms
2024-08-29 17:47:50.740 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7192/api/CartItems - application/json 52
2024-08-29 17:47:50.750 +03:00 [INF] CORS policy execution successful.
2024-08-29 17:47:50.754 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CartItemsController.addProductToCart (web api 4)'
2024-08-29 17:47:50.765 +03:00 [INF] Route matched with {action = "addProductToCart", controller = "CartItems"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult addProductToCart(web_api_4.DTOs.addToCartDTO) on controller web_api_4.Controllers.CartItemsController (web api 4).
2024-08-29 17:47:51.424 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartID], [ProductID], [Quantity])
OUTPUT INSERTED.[CartItemID]
VALUES (@p0, @p1, @p2);
2024-08-29 17:47:51.450 +03:00 [INF] Executing OkObjectResult, writing value of type 'web_api_4.Models.CartItem'.
2024-08-29 17:47:51.461 +03:00 [INF] Executed action web_api_4.Controllers.CartItemsController.addProductToCart (web api 4) in 692.1163ms
2024-08-29 17:47:51.463 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CartItemsController.addProductToCart (web api 4)'
2024-08-29 17:47:51.470 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7192/api/CartItems - 200 null application/json; charset=utf-8 730.4473ms
2024-08-29 17:48:15.024 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/CartItems - null null
2024-08-29 17:48:15.028 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 17:48:15.032 +03:00 [INF] Route matched with {action = "allCartItems", controller = "CartItems"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult allCartItems() on controller web_api_4.Controllers.CartItemsController (web api 4).
2024-08-29 17:48:15.223 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CartItemID] AS [CartItemId], [c].[CartID] AS [CartId], [c].[Quantity], [p].[ProductID] AS [ProductId], [p].[ProductName], [p].[Price], [p].[ProductImage]
FROM [CartItems] AS [c]
LEFT JOIN [Products] AS [p] ON [c].[ProductID] = [p].[ProductID]
2024-08-29 17:48:15.229 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.DTOs.CartItemsResponseDTO, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 17:48:15.233 +03:00 [INF] Executed action web_api_4.Controllers.CartItemsController.allCartItems (web api 4) in 200.2482ms
2024-08-29 17:48:15.235 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 17:48:15.236 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/CartItems - 200 null application/json; charset=utf-8 212.1816ms
2024-08-29 17:48:32.900 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7192/api/CartItems/10 - application/json 19
2024-08-29 17:48:32.905 +03:00 [INF] CORS policy execution successful.
2024-08-29 17:48:32.905 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CartItemsController.updateCartItem (web api 4)'
2024-08-29 17:48:32.909 +03:00 [INF] Route matched with {action = "updateCartItem", controller = "CartItems"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult updateCartItem(Int32, web_api_4.DTOs.updateCartItemDTO) on controller web_api_4.Controllers.CartItemsController (web api 4).
2024-08-29 17:48:32.949 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__CartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CartItemID], [c].[CartID], [c].[ProductID], [c].[Quantity]
FROM [CartItems] AS [c]
WHERE [c].[CartItemID] = @__CartItemId_0
2024-08-29 17:48:32.964 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CartItems] SET [CartID] = @p0, [ProductID] = @p1, [Quantity] = @p2
OUTPUT 1
WHERE [CartItemID] = @p3;
2024-08-29 17:48:32.967 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-08-29 17:48:32.968 +03:00 [INF] Executed action web_api_4.Controllers.CartItemsController.updateCartItem (web api 4) in 57.6735ms
2024-08-29 17:48:32.968 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CartItemsController.updateCartItem (web api 4)'
2024-08-29 17:48:32.969 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7192/api/CartItems/10 - 200 0 null 68.5584ms
2024-08-29 17:48:48.556 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/CartItems - null null
2024-08-29 17:48:48.560 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 17:48:48.561 +03:00 [INF] Route matched with {action = "allCartItems", controller = "CartItems"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult allCartItems() on controller web_api_4.Controllers.CartItemsController (web api 4).
2024-08-29 17:48:48.567 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CartItemID] AS [CartItemId], [c].[CartID] AS [CartId], [c].[Quantity], [p].[ProductID] AS [ProductId], [p].[ProductName], [p].[Price], [p].[ProductImage]
FROM [CartItems] AS [c]
LEFT JOIN [Products] AS [p] ON [c].[ProductID] = [p].[ProductID]
2024-08-29 17:48:48.569 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.DTOs.CartItemsResponseDTO, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 17:48:48.570 +03:00 [INF] Executed action web_api_4.Controllers.CartItemsController.allCartItems (web api 4) in 7.0148ms
2024-08-29 17:48:48.570 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 17:48:48.571 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/CartItems - 200 null application/json; charset=utf-8 14.6182ms
2024-08-29 17:48:58.611 +03:00 [WRN] The WebRootPath was not found: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4\wwwroot. Static files may be unavailable.
2024-08-29 17:48:58.685 +03:00 [INF] Now listening on: https://localhost:7192
2024-08-29 17:48:58.686 +03:00 [INF] Now listening on: http://localhost:5289
2024-08-29 17:48:58.689 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 17:48:58.689 +03:00 [INF] Hosting environment: Development
2024-08-29 17:48:58.690 +03:00 [INF] Content root path: C:\Users\Orange\Desktop\Notes\.NET web api 7\web api 4\web api 4
2024-08-29 17:48:58.968 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-08-29 17:48:59.142 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 174.7417ms
2024-08-29 17:48:59.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-08-29 17:48:59.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 17:48:59.180 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13753 application/javascript; charset=utf-8 7.8841ms
2024-08-29 17:48:59.196 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.1355ms
2024-08-29 17:48:59.246 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-08-29 17:48:59.325 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 78.8296ms
2024-08-29 17:49:02.415 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/CartItems - null null
2024-08-29 17:49:02.424 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 17:49:02.431 +03:00 [INF] Route matched with {action = "allCartItems", controller = "CartItems"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult allCartItems() on controller web_api_4.Controllers.CartItemsController (web api 4).
2024-08-29 17:49:03.165 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CartItemID] AS [CartItemId], [c].[CartID] AS [CartId], [c].[Quantity], [p].[ProductID] AS [ProductId], [p].[ProductName], [p].[Price], [p].[ProductImage]
FROM [CartItems] AS [c]
LEFT JOIN [Products] AS [p] ON [c].[ProductID] = [p].[ProductID]
2024-08-29 17:49:03.181 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.DTOs.CartItemsResponseDTO, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 17:49:03.194 +03:00 [INF] Executed action web_api_4.Controllers.CartItemsController.allCartItems (web api 4) in 759.7805ms
2024-08-29 17:49:03.197 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 17:49:03.202 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/CartItems - 200 null application/json; charset=utf-8 786.7708ms
2024-08-29 17:49:17.324 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7192/api/CartItems/10 - null null
2024-08-29 17:49:17.330 +03:00 [INF] CORS policy execution successful.
2024-08-29 17:49:17.331 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CartItemsController.DeleteCartItem (web api 4)'
2024-08-29 17:49:17.337 +03:00 [INF] Route matched with {action = "DeleteCartItem", controller = "CartItems"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteCartItem(Int32) on controller web_api_4.Controllers.CartItemsController (web api 4).
2024-08-29 17:49:17.427 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__CartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CartItemID], [c].[CartID], [c].[ProductID], [c].[Quantity]
FROM [CartItems] AS [c]
WHERE [c].[CartItemID] = @__CartItemId_0
2024-08-29 17:49:17.538 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [CartItemID] = @p0;
2024-08-29 17:49:17.548 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 17:49:17.548 +03:00 [INF] Executed action web_api_4.Controllers.CartItemsController.DeleteCartItem (web api 4) in 209.5361ms
2024-08-29 17:49:17.549 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CartItemsController.DeleteCartItem (web api 4)'
2024-08-29 17:49:17.550 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7192/api/CartItems/10 - 204 null null 226.0387ms
2024-08-29 17:49:24.691 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/CartItems - null null
2024-08-29 17:49:24.696 +03:00 [INF] Executing endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 17:49:24.697 +03:00 [INF] Route matched with {action = "allCartItems", controller = "CartItems"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult allCartItems() on controller web_api_4.Controllers.CartItemsController (web api 4).
2024-08-29 17:49:24.764 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CartItemID] AS [CartItemId], [c].[CartID] AS [CartId], [c].[Quantity], [p].[ProductID] AS [ProductId], [p].[ProductName], [p].[Price], [p].[ProductImage]
FROM [CartItems] AS [c]
LEFT JOIN [Products] AS [p] ON [c].[ProductID] = [p].[ProductID]
2024-08-29 17:49:24.768 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[web_api_4.DTOs.CartItemsResponseDTO, web api 4, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 17:49:24.769 +03:00 [INF] Executed action web_api_4.Controllers.CartItemsController.allCartItems (web api 4) in 70.5634ms
2024-08-29 17:49:24.770 +03:00 [INF] Executed endpoint 'web_api_4.Controllers.CartItemsController.allCartItems (web api 4)'
2024-08-29 17:49:24.770 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/CartItems - 200 null application/json; charset=utf-8 78.9146ms
